# Secret Santa App - Visual Flow Diagrams

## ğŸ„ User Flow Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   User Opens App (/)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Are they organizer?   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  YES - CREATE  â”‚              â”‚  NO - HAVE URL â”‚
        â”‚  HomePage      â”‚              â”‚  /room/{id}    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Enter Names    â”‚              â”‚   RoomPage     â”‚
        â”‚ (one per line) â”‚              â”‚   Loads Room   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Click "Create  â”‚              â”‚ Check Device   â”‚
        â”‚  room"         â”‚              â”‚  localStorage  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                â”‚
                â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                    â”‚                        â”‚
                â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚            â”‚  Found in      â”‚      â”‚  Not Found -   â”‚
                â”‚            â”‚  localStorage  â”‚      â”‚  Enter Name    â”‚
                â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                    â”‚                        â”‚
                â”‚                    â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                    â”‚                â”‚ Match Name to  â”‚
                â”‚                    â”‚                â”‚  Participant   â”‚
                â”‚                    â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                    â”‚                        â”‚
                â”‚                    â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                    â”‚                â”‚  Save to       â”‚
                â”‚                    â”‚                â”‚  localStorage  â”‚
                â”‚                    â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                    â”‚                        â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   Check if Already     â”‚
                         â”‚   Picked (assignments) â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  YES - Show     â”‚      â”‚  NO - Show      â”‚
                â”‚  Target Name    â”‚      â”‚  "Pick" Button  â”‚
                â”‚  ğŸ "You got    â”‚      â”‚                 â”‚
                â”‚   Charlie!"     â”‚      â”‚                 â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚  User Clicks    â”‚
                                         â”‚  "Pick"         â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚  TRANSACTION    â”‚
                                         â”‚  Assign Secret  â”‚
                                         â”‚  Santa          â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚  Show Result    â”‚
                                         â”‚  Update Local   â”‚
                                         â”‚  Storage        â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Transaction Flow (Race Condition Safety)

```
   Device A (Alice)                Firebase DB                 Device B (Bob)
        â”‚                               â”‚                             â”‚
        â”‚  1. Click "Pick"              â”‚                             â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚
        â”‚  2. Start Transaction          â”‚                             â”‚
        â”‚     LOCK room data             â”‚                             â”‚
        â”‚                               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                               â”‚  1. Click "Pick"            â”‚
        â”‚                               â”‚  2. WAIT (locked)...        â”‚
        â”‚                               â”‚                             â”‚
        â”‚  3. Read availableTargets      â”‚                             â”‚
        â”‚     [Charlie, Diana, Evan]     â”‚                             â”‚
        â”‚  4. Filter: no Alice           â”‚                             â”‚
        â”‚  5. Random pick: Charlie       â”‚                             â”‚
        â”‚  6. Write assignment           â”‚                             â”‚
        â”‚  7. Mark Charlie unavailable   â”‚                             â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                             â”‚
        â”‚  8. COMMIT & UNLOCK            â”‚                             â”‚
        â”‚                               â”‚                             â”‚
        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
        â”‚  9. Success! Show "Charlie"    â”‚                             â”‚
        â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
        â”‚                               â”‚  3. Start Transaction       â”‚
        â”‚                               â”‚     LOCK room data          â”‚
        â”‚                               â”‚  4. Read availableTargets   â”‚
        â”‚                               â”‚     [Diana, Evan]           â”‚
        â”‚                               â”‚     (Charlie gone!)         â”‚
        â”‚                               â”‚  5. Filter: no Bob          â”‚
        â”‚                               â”‚  6. Random pick: Diana      â”‚
        â”‚                               â”‚  7. Write assignment        â”‚
        â”‚                               â”‚  8. Mark Diana unavailable  â”‚
        â”‚                               â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                               â”‚  9. COMMIT & UNLOCK         â”‚
        â”‚                               â”‚                             â”‚
        â”‚                               â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
        â”‚                               â”‚  10. Success! Show "Diana"  â”‚
        â”‚                               â”‚                             â”‚
        â”‚  Real-time update             â”‚  Real-time update           â”‚
        â”‚  "2/5 assigned"               â”‚  "2/5 assigned"             â”‚
        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
```

**Key Points:**

- âœ… Firebase transactions are ATOMIC
- âœ… Second transaction sees updated data (Charlie unavailable)
- âœ… No duplicate assignments possible
- âœ… Both users get real-time updates

---

## ğŸ’¾ Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Browser                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    React App                           â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  HomePage    â”‚  â”‚   RoomPage   â”‚  â”‚ NotFoundPageâ”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚         â”‚                 â”‚                            â”‚  â”‚
â”‚  â”‚         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚         â”‚    â”‚   useRoom Hook          â”‚               â”‚  â”‚
â”‚  â”‚         â”‚    â”‚   (Real-time subscribe) â”‚               â”‚  â”‚
â”‚  â”‚         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚         â”‚                 â”‚                            â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                           â”‚                            â”‚  â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚         â”‚   roomsService.ts            â”‚               â”‚  â”‚
â”‚  â”‚         â”‚   - createRoom()             â”‚               â”‚  â”‚
â”‚  â”‚         â”‚   - subscribeToRoom()        â”‚               â”‚  â”‚
â”‚  â”‚         â”‚   - assignSecretSanta() â—„â”€â”€â”€â”€â”¼â”€â”€â”€Transaction â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚                           â”‚                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                               â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚         â”‚   localStorage.ts                â”‚                  â”‚
â”‚         â”‚   - getLocalParticipant()        â”‚                  â”‚
â”‚         â”‚   - setLocalParticipant()        â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                              â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ Firebase SDK v9 (WebSocket)
                               â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚      Firebase Realtime Database      â”‚
            â”‚                                      â”‚
            â”‚  /rooms/{roomId}                     â”‚
            â”‚    â”œâ”€ participants/                  â”‚
            â”‚    â”œâ”€ assignments/                   â”‚
            â”‚    â”œâ”€ availableTargets/              â”‚
            â”‚    â”œâ”€ status                         â”‚
            â”‚    â””â”€ createdAt                      â”‚
            â”‚                                      â”‚
            â”‚  Security Rules Applied              â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Database Schema Visualization

```
Firebase Realtime Database
â”‚
â””â”€â”€ rooms/
    â”‚
    â””â”€â”€ abc123xyz (roomId)
        â”‚
        â”œâ”€â”€ createdAt: 1701734400000
        â”‚
        â”œâ”€â”€ status: "open" | "completed"
        â”‚
        â”œâ”€â”€ participants/
        â”‚   â”œâ”€â”€ p1_1701734400001
        â”‚   â”‚   â”œâ”€â”€ id: "p1_1701734400001"
        â”‚   â”‚   â””â”€â”€ name: "Alice"
        â”‚   â”‚
        â”‚   â”œâ”€â”€ p2_1701734400002
        â”‚   â”‚   â”œâ”€â”€ id: "p2_1701734400002"
        â”‚   â”‚   â””â”€â”€ name: "Bob"
        â”‚   â”‚
        â”‚   â””â”€â”€ p3_1701734400003
        â”‚       â”œâ”€â”€ id: "p3_1701734400003"
        â”‚       â””â”€â”€ name: "Charlie"
        â”‚
        â”œâ”€â”€ assignments/
        â”‚   â”œâ”€â”€ p1_1701734400001
        â”‚   â”‚   â”œâ”€â”€ participantId: "p1_1701734400001"
        â”‚   â”‚   â”œâ”€â”€ targetId: "p3_1701734400003"
        â”‚   â”‚   â””â”€â”€ assignedAt: 1701734450000
        â”‚   â”‚
        â”‚   â””â”€â”€ p2_1701734400002
        â”‚       â”œâ”€â”€ participantId: "p2_1701734400002"
        â”‚       â”œâ”€â”€ targetId: "p1_1701734400001"
        â”‚       â””â”€â”€ assignedAt: 1701734460000
        â”‚
        â””â”€â”€ availableTargets/
            â”œâ”€â”€ p1_1701734400001: false  (Alice picked)
            â”œâ”€â”€ p2_1701734400002: true   (Bob available)
            â””â”€â”€ p3_1701734400003: false  (Charlie picked)
```

---

## ğŸŒ Component Hierarchy

```
App
 â”‚
 â””â”€â”€ BrowserRouter
      â”‚
      â”œâ”€â”€ Route path="/"
      â”‚    â””â”€â”€ HomePage
      â”‚         â”œâ”€â”€ Form
      â”‚         â”‚    â”œâ”€â”€ TextArea (participant names)
      â”‚         â”‚    â””â”€â”€ Button (create room)
      â”‚         â”‚
      â”‚         â””â”€â”€ InfoBox (instructions)
      â”‚
      â”œâ”€â”€ Route path="/room/:roomId"
      â”‚    â””â”€â”€ RoomPage
      â”‚         â”œâ”€â”€ useRoom(roomId) â”€â”€â–º Firebase subscription
      â”‚         â”‚
      â”‚         â”œâ”€â”€ RoomInfo
      â”‚         â”‚    â”œâ”€â”€ Room ID display
      â”‚         â”‚    â””â”€â”€ Copy link button
      â”‚         â”‚
      â”‚         â”œâ”€â”€ Stats
      â”‚         â”‚    â”œâ”€â”€ Total participants
      â”‚         â”‚    â”œâ”€â”€ Assignments made
      â”‚         â”‚    â””â”€â”€ Status
      â”‚         â”‚
      â”‚         â”œâ”€â”€ [If no local participant]
      â”‚         â”‚    â””â”€â”€ NameForm
      â”‚         â”‚         â”œâ”€â”€ Input (enter name)
      â”‚         â”‚         â”œâ”€â”€ Button (submit)
      â”‚         â”‚         â””â”€â”€ ParticipantList
      â”‚         â”‚
      â”‚         â”œâ”€â”€ [If has assignment]
      â”‚         â”‚    â””â”€â”€ ResultCard
      â”‚         â”‚         â””â”€â”€ Target name display
      â”‚         â”‚
      â”‚         â”œâ”€â”€ [If no assignment yet]
      â”‚         â”‚    â””â”€â”€ PickCard
      â”‚         â”‚         â”œâ”€â”€ Button (Pick my Secret Santa)
      â”‚         â”‚         â””â”€â”€ Available count
      â”‚         â”‚
      â”‚         â””â”€â”€ InfoBox (how it works)
      â”‚
      â””â”€â”€ Route path="*"
           â””â”€â”€ NotFoundPage
                â”œâ”€â”€ 404 message
                â””â”€â”€ Button (go home)
```

---

## ğŸ“± Responsive Layout Breakpoints

```
Desktop (> 768px)                Mobile (â‰¤ 768px)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Max Width: 800px    â”‚         â”‚  100%    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  Width   â”‚
â”‚  â”‚                â”‚  â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚   Container    â”‚  â”‚         â”‚          â”‚
â”‚  â”‚                â”‚  â”‚         â”‚ Stack    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚         â”‚ Vertical â”‚
â”‚  â”‚  â”‚  Stats   â”‚  â”‚  â”‚         â”‚          â”‚
â”‚  â”‚  â”‚ 3 cols   â”‚  â”‚  â”‚         â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚         â”‚ â”‚Stat 1â”‚ â”‚
â”‚  â”‚                â”‚  â”‚         â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚         â”‚ â”‚Stat 2â”‚ â”‚
â”‚  â”‚  â”‚          â”‚  â”‚  â”‚         â”‚ â”œâ”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚  â”‚   Card   â”‚  â”‚  â”‚         â”‚ â”‚Stat 3â”‚ â”‚
â”‚  â”‚  â”‚          â”‚  â”‚  â”‚         â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚         â”‚          â”‚
â”‚  â”‚                â”‚  â”‚         â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚ â”‚      â”‚ â”‚
â”‚                      â”‚         â”‚ â”‚ Card â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â”‚      â”‚ â”‚
                                 â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Rules Logic Flow

```
User attempts write to /rooms/{roomId}
            â”‚
            â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Does room exist?    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚
   YES              NO
    â”‚                â”‚
    â–¼                â–¼
 DENY         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 (already     â”‚ Allow CREATE â”‚
  exists)     â”‚ new room     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User attempts write to /rooms/{roomId}/assignments/{participantId}
            â”‚
            â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Has required fields?    â”‚
  â”‚ - participantId         â”‚
  â”‚ - targetId              â”‚
  â”‚ - assignedAt            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚
   YES              NO
    â”‚                â”‚
    â–¼                â–¼
 ALLOW            DENY
 (valid           (invalid
  structure)       data)
```

---

## ğŸ¯ State Management Flow

```
Component State                    Firebase State
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                â”‚                â”‚                 â”‚
â”‚ localState     â”‚                â”‚  Realtime DB    â”‚
â”‚ - loading      â”‚                â”‚  - participants â”‚
â”‚ - error        â”‚                â”‚  - assignments  â”‚
â”‚ - nameInput    â”‚                â”‚  - available    â”‚
â”‚                â”‚                â”‚    Targets      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                  â”‚
        â”‚   useRoom Hook                   â”‚
        â”‚   (subscribes)                   â”‚
        â”‚                                  â”‚
        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚   Real-time updates              â”‚
        â”‚                                  â”‚
        â”‚   User Action (Pick)             â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
        â”‚   Firebase Transaction           â”‚
        â”‚                                  â”‚
        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚   Updated data                   â”‚
        â”‚                                  â”‚

Local Storage
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ secretSanta_roomId â”‚
â”‚ - participantId    â”‚
â”‚ - name             â”‚
â”‚ - targetName       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â–²
        â”‚ Read on mount
        â”‚ Write on pick
        â–¼
  Component renders
```

---

These diagrams provide a complete visual overview of the Secret Santa app architecture! ğŸ„
